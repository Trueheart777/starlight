---
import type { CollectionEntry } from 'astro:content';
import { getSidebar } from '../utils/navigation'

interface Props {
  currentSlug: CollectionEntry<'docs'>['slug'];
}

const sidebar = getSidebar(Astro.props.currentSlug);
---

<nav>
  <ul>
    {
      sidebar.map((entry) => (
        <li>
          {entry.type === 'page' ? (
            <a href={entry.href}>{entry.label}</a>
          ) : (
            <strong>{entry.label}</strong>
            <ul>
              {entry.entries.map((entry) => (
                <li>
                  {entry.type === 'page' && (
                    <a href={entry.href}>{entry.label}</a>
                  )}
                </li>
              ))}
            </ul>
          )}
        </li>
      ))
    }
  </ul>
  <p>
    <small>
      generated from the file structure ðŸ‘†<br>
      alphabetical ðŸ˜±<br>
      TODO: make configurable
    </small>
  </p>
</nav>

<style>
  nav {
    display: block;
  }
  ul {
    line-height: 2;
  }
  ul strong {
    text-transform: uppercase;
  }
</style>